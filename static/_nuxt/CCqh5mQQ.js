import{_ as O}from"./CXT0DpN4.js";import{_ as X,v as n,q as J,s as U,k as Z,A as j,L as ee,c as u,a as h,j as m,I as p,F as T,G as W,r as te,o as d,N as R,b as F,w as se,t as $,e as oe,H,g as le}from"./C7jP110Z.js";import"./CIqZhkmh.js";const ie={class:"page"},ne=["data-slug","data-tags"],ae={key:0},re={key:1},ce={key:2},ue=["onClick"],de={__name:"index",async setup(he){var N;let _,z;const{$gsap:r}=le(),w=n(null),{data:M}=([_,z]=J(()=>te({query:'page("photography")',select:{id:!0,title:!0,tags:!0,intendedTemplate:!0,subheadline:!0,children:{query:"page.children.listed",select:{id:!0,title:!0,tags:!0,client:!0,credit:!0,color:!0,cover:{query:"page.content.cover.toFile",select:{url:!0,alt:!0,height:!0,width:!0}},image:{query:'page.images.sortBy("sort", "asc").first',select:{url:!0,alt:!0,height:!0,width:!0}}}}}})),_=await _,z(),_),f=(N=M.value)==null?void 0:N.result;U(f);const E=n([]);f.children&&f.children.forEach(s=>{typeof s.tags=="string"&&s.tags.split(",").map(t=>t.trim()).forEach(t=>{t&&!E.value.includes(t)&&E.value.push(t)})}),n([]),n([]);const P=n(!1),g=n([]),y=n(null);n(null);const a=n(null),C=n(!1),V=n(null),Q=n(null),Y=n(null),L=n(!1);(()=>{if(f.children){const s=f.children,i=s.filter((o,c)=>c%2===0).reverse(),t=s.filter((o,c)=>c%2!==0).reverse();let l=0,e=0;for(let o=0;o<s.length;o++)o==0&&(g.value.unshift({...t[0],isClone:!0}),t.shift(),s.length%2!==0&&t.push(s[0])),g.value.push(s[o]),(o+1)%2===0&&(l<i.length&&(g.value.push({...i[l],isClone:!0}),l++),e<t.length&&(g.value.push({...t[e],isClone:!0}),e++))}})();const D=s=>{const i=y.value.querySelectorAll(".project"),t=r.timeline();w.value===s?(w.value=null,i.forEach(l=>{t.to(".projects",{scale:1,duration:.01},0),t.to(l,{scale:1,opacity:1,duration:.2},0)}),r.set(".page",{height:"auto",onComplete:()=>{L.value=!0}})):(w.value=s,i.forEach(l=>{var o;const e=((o=l.getAttribute("data-tags"))==null?void 0:o.split(",").map(c=>c.trim()))||[];r.set(l,{transformOrigin:"top"}),r.to(".projects",{scale:.65,duration:.001},0),L.value==!1&&r.set(".page",{height:document.querySelector(".projects").getBoundingClientRect().height*.65,onComplete:()=>{L.value=!0}}),t.to(".project",{scale:.65,duration:.2},0),e.includes(s)?(t.to(l,{opacity:1,duration:.2},0),t.to(".project.clone",{opacity:.2,duration:.2},0)):(t.to(l,{opacity:.2,duration:.2},0),t.to(".project.clone",{opacity:.2,duration:.2},0))}))},B=()=>{C.value=!C.value};Z(C,s=>{var i,t;s?(i=document.querySelector("body"))==null||i.classList.add("infos-is-active"):(t=document.querySelector("body"))==null||t.classList.remove("infos-is-active")});const A=["#8c03fc","#FE6000","#9F91C7","#5EC76A","#8ae6f2","#ff0a64"],G=()=>{const s=Math.floor(Math.random()*A.length);return A[s]},K=()=>{const s=document.querySelector("header"),i=G();s&&(s.style.color=i,s.style.transition="color 0.5s ease");const t=document.querySelector(".filters"),l=document.querySelector(".about-content");l&&(l.style.color=i,l.style.transition="color 0.5s ease"),t&&(t.style.color=i,t.style.transition="color 0.5s ease");const e=document.querySelector(".button-images-infos");e&&(e.style.color=i,e.style.transition="color 0.5s ease")};return j(()=>{P.value=!0,K()}),ee((s,i,t)=>{if(window.innerWidth>=720){if(y.value.classList.add("pointer-event-none"),s.name.startsWith("photography")){const e=y.value.querySelector(`[data-slug="${s.params.id[0]}"]:not(.clone)`),o=e.querySelector("img").getBoundingClientRect(),c=y.value.querySelectorAll(".project");a.value=e.querySelector(".high-quality").cloneNode(!0),a.value.style.position="absolute",a.value.style.top=`${o.top+window.scrollY}px`,a.value.style.left=`${o.left}px`,a.value.style.width=`${o.width}px`,a.value.style.height=`${o.height}px`,a.value.style.zIndex="10",a.value.style.opacity="1",a.value.classList.add("transition-clone"),document.body.appendChild(a.value),c.forEach(v=>{v!==e.closest(".project")&&r.to(v,{opacity:0,duration:.15})}),e.querySelector(".low-quality")&&(r.set(".low-quality",{opacity:0}),r.set(e.querySelector(".high-quality"),{opacity:1}));const q=window.innerWidth>=720?200:20,x=(window.innerWidth-q)/o.width,k=window.innerHeight/o.height,S=Math.min(x,k),b=window.innerWidth/2-(o.left+o.width/2),I=window.innerHeight/2-(o.top+o.height/2);var l=r.timeline();l.to(e.querySelector("img:not(.transition-clone)"),{opacity:0}),l.to(a.value,{duration:.5,x:b,y:I,scale:S,ease:"slow(0.7,0.7,false)",onComplete:()=>{window.scrollTo(0,0),r.set(a.value,{top:o.top}),t()}},"-=80%")}}else t()}),(s,i)=>{const t=O,l=oe;return d(),u(T,null,[h("button",{class:"button-images-infos",onClick:B},"Image infos"),m(C)?(d(),u("div",{key:0,class:"overlay-bg",onClick:B,onMouseenter:B},null,32)):p("",!0),h("div",ie,[m(P)?(d(),u("ul",{key:0,class:"projects",ref_key:"projects",ref:y},[(d(!0),u(T,null,W(m(g),(e,o)=>(d(),u("li",{key:o,"data-slug":`${e.id.split("/")[1]}`,"data-tags":e.tags,class:R(["project",{clone:e.isClone,"pointer-events-none":e.isClone}])},[F(l,{to:`/${e.id}`},{default:se(()=>{var c,q,x,k,S,b,I,v;return[h("figure",{ref_for:!0,ref_key:"imageWrapper",ref:V,style:H(`width: 100%; position: relative;padding-top: ${((c=e==null?void 0:e.cover)==null?void 0:c.height)/((q=e==null?void 0:e.cover)==null?void 0:q.width)*100}%`)},[F(t,{ref_for:!0,ref_key:"lazyImage",ref:Y,"is-loading":!0,"is-preload":!0,width:e.cover.width,height:e.cover.height,src:((x=e==null?void 0:e.cover)==null?void 0:x.url)??((k=e==null?void 0:e.images)==null?void 0:k[0].url),lowQualitySrc:(S=e==null?void 0:e.cover)==null?void 0:S.url,alt:((b=e==null?void 0:e.cover)==null?void 0:b.alt)??((v=(I=e==null?void 0:e.images)==null?void 0:I[0])==null?void 0:v.alt),sizes:"25vw xs:25vw sm:25vw md:25vw lg:25vw xl:25vw xxl:25vw 2xl:25vw"},null,8,["width","height","src","lowQualitySrc","alt"]),h("figcaption",{class:"caption",style:H({color:e.color})},[e.title?(d(),u("div",ae," Projet: "+$(e.title),1)):p("",!0),e.client?(d(),u("div",re," Client: "+$(e.client),1)):p("",!0),e.credit?(d(),u("div",ce," CrÃ©dit photo: "+$(e.credit),1)):p("",!0)],4)],4)]}),_:2},1032,["to"])],10,ne))),128))],512)):p("",!0),h("div",{class:"filters",ref_key:"filters",ref:Q},[h("ul",null,[(d(!0),u(T,null,W(m(E),e=>(d(),u("li",{key:e,onClick:o=>D(e),class:R({active:m(w)===e})},$(e),11,ue))),128))])],512)])],64)}}},me=X(de,[["__scopeId","data-v-105774b7"]]);export{me as default};
