import{g as v,h as S,i as A,j as d,k as C,l as k,n as E,m as L,q as y,r as w,s as D,v as T,o as j,c as q,a as g,t as K}from"./1WCwrkPV.js";function m(t){return{query:`page("${t}")`,select:{id:!0,title:!0,intendedTemplate:!0,text:"page.text.kirbytext"}}}function O(t=v()){var e;return(e=t.ssrContext)==null?void 0:e.event}function P(t){return S()?(A(t),!0):!1}function b(t){return typeof t=="function"?t():d(t)}const W=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const B=Object.prototype.toString,H=t=>B.call(t)==="[object Object]",M=()=>{};function R(t){var e;const n=b(t);return(e=n==null?void 0:n.$el)!=null?e:n}const V=W?window:void 0;function _(...t){let e,n,s,r;if(typeof t[0]=="string"||Array.isArray(t[0])?([n,s,r]=t,e=V):[e,n,s,r]=t,!e)return M;Array.isArray(n)||(n=[n]),Array.isArray(s)||(s=[s]);const o=[],c=()=>{o.forEach(a=>a()),o.length=0},u=(a,i,p,h)=>(a.addEventListener(i,p,h),()=>a.removeEventListener(i,p,h)),l=C(()=>[R(e),b(r)],([a,i])=>{if(c(),!a)return;const p=H(i)?{...i}:i;o.push(...n.flatMap(h=>s.map(x=>u(a,h,x,p))))},{immediate:!0,flush:"post"}),f=()=>{l(),c()};return P(f),f}function G(t){{const e=k(),n=()=>{var r;window.location.hash&&((r=document.querySelector(window.location.hash))==null||r.scrollIntoView({behavior:"smooth"}))},s=r=>{const o=r.target.closest("a");if(!r.defaultPrevented&&o&&r.button===0&&o.target!=="_blank"&&o.rel!=="external"&&!o.download&&!r.metaKey&&!r.ctrlKey&&!r.shiftKey&&!r.altKey){const c=new URL(o.href),{origin:u,pathname:l,hash:f}=c;if(u!==window.location.origin)return;r.preventDefault(),f&&(!l||l===e.path)?(window.history.replaceState({},"",o.href),n()):E({path:l,hash:f})}};_(window,"hashchange",n),_(t,"click",s)}}const I={class:"h1"},N=["innerHTML"],Q=L({__name:"[...id]",async setup(t){let e,n;const s=k().path,{data:r}=([e,n]=y(()=>w(m(s))),e=await e,n(),e);let o=r.value;if(!(o!=null&&o.result)){const{data:l}=([e,n]=y(()=>w(m("error"))),e=await e,n(),e);o=l.value,O()}const c=o==null?void 0:o.result;D(c);const u=T();return G(u),(l,f)=>{var a,i;return j(),q("article",null,[g("h1",I,K((a=d(c))==null?void 0:a.title),1),g("div",{ref_key:"content",ref:u,class:"text",innerHTML:(i=d(c))==null?void 0:i.text},null,8,N)])}}});export{Q as default};
